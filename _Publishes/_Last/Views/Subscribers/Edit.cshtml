@model BrokerMVC.Models.Subscriber

@{
    ViewBag.Title = General.SiteName + " - " + Model.FullName + " - " + General.Edit;
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
@helper selected(string c, string culture)
{
if (c == culture)
{
        @:checked="checked"
    }
}
<div class="panel panel-primary">
    <div class="panel-heading">
        <div class="row">
            <div class="col-md-7 col-xs-8 pull-right">
                <h2>@Model.FullName</h2>
            </div>
            <div class="col-md-3 col-xs-12 pull-left">
                <div class="btn-group btn-group-status btn-group pull-right">

                    @if (Security.IsUserInRole(BrokerMVC.Roles.Admin))
                    {
                        <a href='@Url.Action("Index")' data-toggle="tooltip" data-placement="bottom" title="@General.BackToList" data-original-title="@General.BackToList" class="btn btn-group-sm btn-success">
                            <strong> <i class="fa fa-arrow-circle-left fa-2x"></i></strong>
                        </a>
                        @*<a href='@Url.Action("Delete", new { id = @Model.ID })' data-toggle="tooltip" data-placement="bottom" title="@General.Delete" data-original-title="@General.Delete" class="btn btn-group-sm btn-success">
                            <strong> <i class="fa fa-trash fa-2x"></i></strong>
                        </a>*@
                        <button type="button" onclick="SuspendUser(@Model.ID)" data-target="#divModal" data-toggle="modal" class="btn btn-group-sm btn-success">
                            <div data-toggle="tooltip" data-placement="bottom" title="@General.Suspend" data-original-title="@General.Suspend">
                                <strong> <i class="fa fa-pause-circle fa-2x"></i></strong>
                            </div>
                        </button>

                        <a href='@Url.Action("Activate", new { id = Model.ID })' data-toggle="tooltip" data-placement="bottom" title="@General.Activate" data-original-title="@General.Activate" class="btn btn-group-sm btn-success">
                            <strong> <i class="fa fa-play-circle fa-2x"></i></strong>
                        </a>
                    }
                    @*else
                    {
                        <a href='@Url.Action("Index", "UserDashBoard")' data-toggle="tooltip" data-placement="bottom" title="@General.DashBoard" data-original-title="@General.DashBoard" class="btn btn-group-sm btn-Dashboard">
                            <span class="fa-stack">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-dashboard fa-stack-1x Dashboard-icon"></i>
                            </span>
                        </a>
                    }*@
                    <button type="button" onclick="ResetPassword(@Model.ID)" data-target="#divModal" data-toggle="modal" class="btn btn-group-sm btn-success">
                        <div data-toggle="tooltip" data-placement="bottom" title="@General.ResetPassword" data-original-title="@General.ResetPassword">
                            <span class="fa-stack">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-refresh fa-stack-1x text-success"></i>
                            </span>
                        </div>
                    </button>

                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-body">
        @if (Model.ActiveStatusID == (int)ActiveStatus.Pending)
        {
        <div class="col-md-12">
            <div class="alert warning">
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                <strong> @Messages.PendingAccount </strong>
            </div>
        </div>
        }
        @if (Model.SuspendReasonID != null)
        {
        @Html.Partial("_SuspendMessage", Model.SuspendData)
        }
        <div class="row">
            <div class="col-md-8">
                <div class="panel panel-warning">
                    <div class="panel-heading">
                        <div class="panel-title" role="button" data-toggle="collapse" href="#dicBasicData" aria-expanded="false" aria-controls="dicBasicData">
                            <h4>
                                <i class="fa fa-angle-down"></i>
                                <i class="fa fa-address-card"></i>
                                @General.BasicData
                            </h4>
                        </div>
                    </div>
                    <div id="dicBasicData" class="panel panel-body collapse in">
                        @using (Html.BeginForm())
                        {
                        @Html.AntiForgeryToken()

                        <div class="form-horizontal">

                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            @Html.HiddenFor(model => model.ID)
                            @Html.HiddenFor(model => model.CompanyID)
                            @Html.HiddenFor(model => model.UserName)
                            @Html.HiddenFor(model => model.ActivationCode)
                            @Html.HiddenFor(model => model.ActiveStatusID)
                            @Html.HiddenFor(model => model.CreatedDate)
                            @Html.HiddenFor(model => model.IsCompanyAdmin)
                            @Html.HiddenFor(model => model.StatusChangedDate)
                            @Html.HiddenFor(model => model.SuspendReasonID)
                            @Html.HiddenFor(model => model.SuspendMessage)


                            <div class="form-group">
                                @Html.LabelFor(model => model.FullName, htmlAttributes: new { @class = "control-label col-md-2 pull-right" })
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.FullName, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.FullName, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(model => model.EnFullName, htmlAttributes: new { @class = "control-label col-md-2 pull-right" })
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.EnFullName, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.EnFullName, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(model => model.MobileNo, htmlAttributes: new { @class = "control-label col-md-2 pull-right" })
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.MobileNo, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.MobileNo, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-2 pull-right" })
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
                                </div>
                            </div>



                            <div class="form-group">
                                <div class="col-md-offset-2 col-md-10">
                                    <input type="submit" value="@General.Save" class="btn btn-success btn-lg btn-block" />
                                </div>
                            </div>
                        </div>
                        }
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="col-md-12 ">
                    <div class="panel panel-warning">
                        <div class="panel-heading" >
                            <div class="panel-title paneltitle" role="button" data-toggle="collapse" href="#divAccount" aria-expanded="false" aria-controls="divAccount">
                                <h4 class="col-md-10 pull-right">
                                    <i class="fa fa-angle-down"></i>
                                    <i class="fa fa-user-secret"></i>
                                    @General.AccountData
                                </h4>

                            </div>
                            @if (Model.CompanyID == null)
                            {
                            <a id="aUpgradeUser" class=" btn btn-sm btn-warning" data-toggle="tooltip" data-placement="bottom" title="@General.Upgrade" data-original-title="@General.Upgrade" href="@Url.Action("UpgradeUser", new { id = Model.ID })">
                                <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
                            </a>
                            }
                        </div>
                        <div id="divAccount" class="panel panel-body collapse in">
                            <span class="col-md-12">@General.UserName: <strong>@Model.UserName</strong></span>
                            <span class="col-md-12">
                                @General.SupscriptionType:
                                @if (Model.CompanyID == null)
                                {
                                <strong>
                                    @Commons.GetValue(SupscriptionType.Individual)
                                </strong>

                                }
                                else
                                {
                                    if (Model.IsCompanyAdmin == true)
                                    {
                                <strong>
                                    @Commons.GetValue(SupscriptionType.CompanyAdmin)
                                </strong>
                                    }
                                    else
                                    {
                                <strong>
                                    @Commons.GetValue(SupscriptionType.CompanyEmployee)
                                </strong>
                                    }
                                }
                            </span>
                        </div>
                    </div>
                </div>
                @if (Model.CompanyID != null)
                {
                <div class="col-md-12 ">
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            <div class="panel-title paneltitle" role="button" data-toggle="collapse" href="#divCompany" aria-expanded="false" aria-controls="divCompany">
                                <h4 class="col-md-10 pull-right">
                                    <i class="fa fa-angle-down"></i>
                                    <i class="fa fa-university"></i>
                                    @General.CompanyData
                                </h4>

                            </div>
                            @if (Security.IsUserInRole(BrokerMVC.Roles.Admin) || Security.IsUserInRole(BrokerMVC.Roles.CompanyAdmin))
                            {
                            <a class=" btn btn-sm btn-warning" href="@Url.Action("Edit", "RealEstateCompanies", new { id = Model.CompanyID })">
                                <i class="fa fa-edit"></i>
                            </a>
                            }
                        </div>
                        <div id="divCompany" class="panel panel-body collapse in">
                            <h4>@Model.RealEstateCompany.Title</h4>
                            <div class=""><i class="fa fa-phone-square fa-1x" aria-hidden="true"></i> @Model.RealEstateCompany.Phone</div>
                            <div class=""><i class="fa fa-envelope-square fa-1x" aria-hidden="true"></i> @Model.RealEstateCompany.Email</div>
                        </div>
                    </div>
                </div>
                }
                <div id="divRealEstates" class="col-md-12 ">
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts
{
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $('#aUpgradeUser').click(function () {
            return confirm('@Messages.ConfirmChangeSubscription');
        });
        LoadUserRealEstates(@Model.ID);

        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
}